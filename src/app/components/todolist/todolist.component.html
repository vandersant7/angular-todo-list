<div class="container">
  <h1>Lista de tarefas <br> (To Do List)</h1>
  <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="task">Tarefa</label>
      <input
        type="text"
        class="form-control"
        id="task"
        placeholder="Digite uma tarefa"
        formControlName="task"
      >
      <small
      [ngClass]="{'visible': taskForm.get('task')?.invalid && taskForm.get('task')?.touched, 'invisible': !(taskForm.get('task')?.invalid && taskForm.get('task')?.touched)}"
        class="form-text text-danger"
      >
        Required field.
      </small>
    </div>

    <button
      [disabled]="taskForm.invalid"
      type="submit"
      class="btn btn-primary"
    >
      Adicionar
    </button>
  </form>

  <table class="table">
    <thead>
      <tr>
        <th scope="col">Tarefa</th>
        <th scope="col">Completa</th>
        <th scope="col">Excluir</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let t of tasks; index as i">
        <td><span [class.completed]="t.isCompleted">{{t.taskName}}</span></td>
        <td><input (change)="onChecked(i)" type="checkbox" [checked]="t.isCompleted"></td>
        <td><button
          class="btn btn-danger btn-sm"
          (click)="onDelete(i)"
        >Remover</button></td>
      </tr>
    </tbody>
  </table>
</div>
